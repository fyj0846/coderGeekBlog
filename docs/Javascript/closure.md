# 闭包 - 你不知道的javascript

当函数可以记住并访问所在的词法作用域时，就产生了闭包，无论函数在哪被执行。

## 词法作用域的查找规则
词法作用域就是定义在词法阶段的作用域，也就是代码书写时决定的作用域。

函数无论在哪被调用，如何被调用，他的词法作用域都由函数声明时所处的位置决定。

查找规则：在多层嵌套的作用域中逐级向上查找，直到搜索到第一个匹配的标志符时停止

## 闭包的规则

无论通过何种方法把内部函数传递到词法作用域之外，它都会持有对原始定义作用域的引用，无论在何处执行这个函数都会使用闭包

只要将函数作为值类型到处传递，就会看到闭包在这些函数中应用。

setTimeout就是一个闭包的例子

## 结论
函数定义的位置决定了其词法作用域，对于存在多层嵌套的词法作用域，内部函数保持对外层作用域的引用。
因此，但内部函数被暴露到词法作用域之外后，即使外部函数已执行完毕其资源也不会被回收，以实现内部函数在后续阶段随时被调用。这就形成了闭包。